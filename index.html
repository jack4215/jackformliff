<!doctype html>
<html class="no-js" lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>網頁轉導中</title>
  <meta name="description" content="Page Redirect">
  <meta name="keywords" content="">
  <meta name="robots" content="noindex, nofollow">
  <meta name="author" content="Jack Lu">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="">
  <meta property="og:description" content="">
  <meta http-equiv="ImageToolBar" content="NO"> 
  <link rel="shortcut icon" href="https://i.imgur.com/VIbdVEb.png">
  <link rel="apple-touch-icon" href="https://i.imgur.com/TtuTiTz.png">
  <link href="https://today.line-scdn.net/dist/article_main.5a82412c48504d4a2a64.css" rel="stylesheet">

  
  <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
  <script>
   window.onload = function () {
     var path = new URL(window.location);
     var liffId = path.searchParams.get('liff_id');
     var formUrl = path.searchParams.get('form');
     var redirect = function(name) {
       var src = decodeURIComponent(formUrl.replace('*%7CNAME%7C*', name));
       try {
         window.location.replace(src);
       } catch {
         window.location.href = src;
       }
     };

     if (!path.searchParams.has('liff_id') || !path.searchParams.has('form')) {
       alert('請使用 LINE 應用程式開啟\n\n若您已使用 LINE 應用程式開啟，還請再確認網址是否無誤，感謝您的配合');
       return;
     }

     liff.init({
       liffId: liffId
     }).then(function (e) {
       var isLoggedIn = liff.isLoggedIn();
       var context = liff.getContext();

       if (isLoggedIn) {
         liff.getProfile()
           .then(function(data) {
             redirect(data.displayName);
           })
           .catch(function(err) {
             alert(err);
           })
       } else {
         liff.login({
           redirectUri: location.href
         })
       }
     }).catch(function (e) {
       alert(e);
     })
  }
 </script>
</head>

<div id="article" class="wrap article article-body">
<body>
  <br>
  <p><P Align=center><font size="4"><b>網頁轉導中</b></p>  
  <br><br><br>
  <p><P Align=center><img src="https://ecbot-object.line-scdn.net/public/web-nuxt/4045642b/img/loading.ed1aff4.gif" width="40"></p>
  <br><br><br></font>
  <p><P Align=center><font size="3">請稍後，正在將您導至表單頁面</p> 
  <br><br></font>
  <p><P Align=center><img src="https://i.imgur.com/gA4JBYw.jpg" width="450"></p>
  <font size="2">
   <hr width=90%>
    <p id="displayName"><b>　　displayName:</b> </p>
    <p id="userId"><b>　　userId:</b> </p>
   <hr width=90%>
   <p><P valign="bottom" Align=center>By 筍伯♪</p>
  </font>
    

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    async function getUserProfile() {
      const profile = await liff.getProfile()
      document.getElementById("displayName").append(profile.displayName)
      document.getElementById("userId").append(profile.userId)
    }
    async function main() {
      await liff.init({ liffId: "1656185375-gBk83qL0" })
      if (liff.isLoggedIn()) {
        getUserProfile()
        document.getElementById("accessToken").append(liff.getAccessToken())
      } /*else {
        liff.login({ redirectUri: "https://jack4215.github.io/jackformliff/" })
      }*/
    }
    main()
  </script>  

</body>
</div>
</html>
